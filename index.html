<!DOCTYPE html>
<html>

<head>
	<title>Catarina Freitas da Cruz</title>
	<meta charset="UTF-8">

	<!-- VR -->
	<script src="src/aframe/aframe.min-1.3.0.js"></script>
	<script src="src/aframe/aframe-ar.3.4.0.js"></script>
	<script src="src/aframe/aframe-multisrc-component-0.3.js"></script>
	<script src="src/main-aframe.js"></script>

	<!-- FACE MESH MASK -->
	<script src="src/mediapipe/camera_utils.js"></script>
	<script src="src/mediapipe/control_utils.js"></script>
	<script src="src/mediapipe/drawing_utils.js"></script>
	<script src="src/mediapipe/face_mesh.js"></script>
	<script src="src/main-tracker.js"></script>

	<!-- FORM -->
	<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
	<script src="https://npmcdn.com/parse/dist/parse.min.js"></script>
	<script src="src/form.js"></script>

	<!-- BOOTSTRAP -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
		crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous">
	</script>

	<style>
		@font-face {
			font-family: 'Comfortaa';
			src: url('Comfortaa-Regular.ttf');
		}
	</style>
</head>

<body style='margin : 0px; overflow: hidden;'>
	<!-- Header -->
	<header style="position: fixed; height: 25vh; width: 100vw; top:0; left: 0; display: flex; flex-direction: row;">
		<img src="https://lh3.googleusercontent.com/sU5wSmwNBzRNDVGx7hbdsZOeiAy9cTBMyhbXMwqm0uaabWDu3j6TOWlDj54_vCC1wZmjuL6feAiha31l63pa6xOh_SVVf3SNnwxLchbsH7E0gw38AnYMp2VXWVwpQvDz-wKSPwSqS30=w2400"
			height="100%" />
		<div style="flex: 1 1 auto; display: flex; align-items: center; justify-content: center;">
			<h1
				style="font-family: Comfortaa; color: #7559A1; background-color: rgba(112, 150, 87, 0.8); margin-left: 16px; word-wrap: break-word; text-align: center;">
				Obrigado pela tua presença</h1>
		</div>
	</header>
	<!-- VR -->
	<!-- https://au.gmented.com/app/marker/marker.php -->
	<a-scene embedded vr-mode-ui="enabled: false;"
		arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3; cameraParametersUrl: ./src/aframe/camera_para.dat;">
		<div id="markers"></div>
		<!-- define a simple camera -->
		<a-entity camera></a-entity>
	</a-scene>
	<!-- Footer -->
	<footer style="position: fixed; width: 100vw; bottom: 16px; left: 0; display: flex; flex-direction: row;">
		<div style="flex: 1 1 auto; display: flex; align-items: flex-end; justify-content: center;">
			<!-- Button trigger modal -->
			<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#dedicatoriaModal">
				Deixa-nos uma dedicatória
			</button>
		</div>
	</footer>

	<!-- Modal -->
	<div class="modal fade" id="dedicatoriaModal" tabindex="-1" aria-labelledby="dedicatoriaModalLabel"
		aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Deixa-nos uma dedicatória</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form class="row needs-validation" novalidate id="dedicatoriaForm">
						<div class="mb-3 d-flex flex-column">
							<label for="takePhotoBtn" class="form-label">Deixa-nos uma foto tua</label>
							<input class="form-control" type="file" id="formFile" hidden>

							<div style="position: relative; width:100%; height:70vh; display: none;"
								id="videoContainer">
								<video width="100%" height="100%" id="video" autoplay hidden></video>
								<div>A carregar</div>
								<canvas width="100%" height="100%" id="canvas" style="position: absolute;top: 0px;left: 0px;"></canvas>
							</div>

							<button onclick="trackerAr.takePhoto()" class="btn btn-primary mt-3" type="button"
								id="takePhotoBtn">Tirar foto</button>
						</div>
						<div class="mb-3">
							<label for="dedicatoriaAssign" class="form-label">Identifica-te</label>
							<input type="text" class="form-control" id="dedicatoriaAssign" required></textarea>
							<div class="invalid-feedback">
								Obrigatório
							</div>
						</div>
						<div class="mb-3">
							<label for="dedicatoriaText" class="form-label">Escreve aqui a tua mensagem</label>
							<textarea class="form-control" id="dedicatoriaText" rows="8"
								required></textarea>
							<div class="invalid-feedback">
								Queres escrever uma dedicatória vazia?
							</div>
						</div>
						<div class="alert alert-success" role="alert" style="display: none;" id="dedicatoriaFormAlertSuccess">
							Obrigado pela tua dedicatória
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" id="dedicatoriaFormSubmitBtn">Enviar</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-B6FVRVRFXK"></script>
	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'G-B6FVRVRFXK');
	</script>
</body>

</html>